# n8n Backup Solution Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# n8n Configuration
# =============================================================================

# n8n Web Interface
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=https

# n8n Authentication (change these for production)
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=change-me-in-production

# n8n Encryption (IMPORTANT: Change this!)
N8N_ENCRYPTION_KEY=change-me-to-a-random-32-character-string

# n8n Features
N8N_RUNNERS_ENABLED=true
N8N_DIAGNOSTICS_ENABLED=false
N8N_TELEMETRY_ENABLED=false

# =============================================================================
# Database Configuration
# =============================================================================

# PostgreSQL Database
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=change-me-secure-password-here
POSTGRES_NON_ROOT_USER=n8n
POSTGRES_NON_ROOT_PASSWORD=change-me-secure-password-here

# Database Connection (for n8n)
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=db
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=change-me-secure-password-here

# =============================================================================
# System Configuration
# =============================================================================

# Timezone (change to your local timezone)
GENERIC_TIMEZONE=UTC

# Webhook URL (change to your domain)
WEBHOOK_URL=https://localhost:5678

# Health Checks
QUEUE_HEALTH_CHECK_ACTIVE=true

# =============================================================================
# SSL/TLS Configuration
# =============================================================================

# SSL Certificates (auto-generated by mkcert)
SSL_CERT_PATH=./localhost.pem
SSL_KEY_PATH=./localhost-key.pem

# =============================================================================
# Backup Configuration
# =============================================================================

# Backup Retention (days)
LOCAL_BACKUP_RETENTION=7
CLOUD_BACKUP_RETENTION=365

# Backup Schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2:00 AM
WORKFLOW_EXPORT_SCHEDULE=0 */6 * * *  # Every 6 hours

# =============================================================================
# Cloud Storage Configuration
# =============================================================================

# Cloud Provider (backblaze-b2, aws-s3, google-drive, etc.)
CLOUD_PROVIDER=

# Cloud Storage Credentials (fill when setting up cloud backup)
CLOUD_ACCESS_KEY=
CLOUD_SECRET_KEY=
CLOUD_BUCKET_NAME=
CLOUD_REGION=

# =============================================================================
# Security Configuration
# =============================================================================

# Backup Encryption
BACKUP_ENCRYPTION_ENABLED=false
BACKUP_ENCRYPTION_PASSWORD=

# Network Security
ALLOWED_HOSTS=localhost,127.0.0.1

# =============================================================================
# Development/Debug Configuration
# =============================================================================

# Debug Mode
DEBUG=false
NODE_ENV=production

# Logging
LOG_LEVEL=info
LOG_OUTPUT=file

# =============================================================================
# Advanced Configuration
# =============================================================================

# Resource Limits
N8N_MAX_EXECUTION_TIMEOUT=3600
N8N_MAX_EXECUTION_DATA_SIZE=50MB

# Performance
N8N_EXECUTION_DATA_SAVE_ON_ERROR=all
N8N_EXECUTION_DATA_SAVE_ON_SUCCESS=all

# Custom Nodes
N8N_CUSTOM_EXTENSIONS=

# =============================================================================
# IMPORTANT SECURITY NOTES
# =============================================================================
#
# 1. Change ALL default passwords before production use
# 2. Use strong, unique passwords for all services
# 3. Keep this .env file secure and never commit to version control
# 4. Regularly rotate credentials and encryption keys
# 5. Use HTTPS in production (configure SSL certificates)
# 6. Restrict network access with firewall rules
# 7. Enable backup encryption for sensitive data
# 8. Monitor logs for suspicious activity
#
# =============================================================================